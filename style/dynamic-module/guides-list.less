/* åˆ—è¡¨è¾…åŠ©æ ·å¼ */

// :root {
//     --custom-list-guides-line-color: var(--b3-theme-primary-lighter);
// }

/* ğŸ‘‡ğŸ‘‡ğŸ‘‡ åˆ—è¡¨è¾…åŠ©çº¿ ğŸ‘‡ğŸ‘‡ğŸ‘‡ */
.seam(@subtype) {
    &[data-subtype="@{subtype}"]>.protyle-action::before {
        /* ä¸æœ¬å±‚èŠ‚ç‚¹çš„æ¥ç¼ */
        // transition: all 250ms;
        right: var(e(%("--custom-list-guides-line-right-%s", @subtype)));
    }
}

.protyle-content {
    .li[data-node-id]:has([data-plugin-focus=true])>.protyle-action {
        /* ä¸Šçº§èŠ‚ç‚¹æ ‡å¿—é¢œè‰² */
        // transition: all 250ms;
        color: var(--custom-list-item-color);
    }

    .list[data-node-id] .list[data-node-id]:has([data-plugin-focus=true]) {

        >.li[data-node-id] {
            &::after {
                /* å­å¼¹æµç›´çº¿ */
                // transition: all 250ms;

                content: "";
                top: calc(-5px);
                bottom: 0;
                left: calc(16px - 2em);

                position: absolute;

                border-left: var(--custom-list-guides-line-width) solid var(--custom-striking-color);
            }

            &:has([data-plugin-focus=true]) {
                >.protyle-action {
                    &::before {
                        /* å­å¼¹æµå¼§çº¿ */
                        // transition: all 250ms;

                        content: "";
                        top: var(--custom-list-guides-line-top);
                        bottom: calc(2px + 7em / 8);
                        left: calc(16px - 2em);

                        position: absolute;

                        border-left: var(--custom-list-guides-line-width) solid var(--custom-striking-color);
                        border-bottom: var(--custom-list-guides-line-width) solid var(--custom-striking-color);
                        border-bottom-left-radius: var(--custom-list-guides-line-radius);
                    }
                }

                .seam(t);
                .seam(u);
                .seam(o);

                &,
                &~.li[data-node-id] {
                    &::after {
                        // transition: all 250ms;
                        border-left-color: transparent;
                    }
                }
            }

            // ä¸‹çº§èŠ‚ç‚¹
            // &:has(>[data-plugin-focus=true][data-node-id]) {
            //     &,
            //     .li[data-node-id] {
            //         &::before {
            //             // transition: all 250ms;
            //             border-left-color: var(--b3-theme-primary);
            //         }
            //     }
            // }
        }
    }

    // å–æ¶ˆå…¶ä»–è§†å›¾çš„è¾…åŠ©çº¿
    [custom-type] .list[data-node-id],
    .list[data-node-id][custom-type] {
        .list[data-node-id]:has([data-plugin-focus=true]) {
            >.li[data-node-id] {
                &::after {
                    // content: unset;
                    top: unset;
                    // bottom: unset;
                    left: unset;

                    // position: unset;

                    // border-left: unset;
                }

                &:has([data-plugin-focus=true]) {

                    >.protyle-action {
                        &::before {
                            content: normal;
                        }
                    }
                }
            }

        }
    }
}

/* ğŸ‘†ğŸ‘†ğŸ‘† åˆ—è¡¨è¾…åŠ©çº¿ ğŸ‘†ğŸ‘†ğŸ‘† */

/* ğŸ‘‡ğŸ‘‡ğŸ‘‡ è¡¨æ ¼åˆ—è¡¨è¾…åŠ©çº¿ ğŸ‘‡ğŸ‘‡ğŸ‘‡ */
.protyle-content {

    [custom-type~=table],
    [custom-type~="è¡¨æ ¼"] {

        // åŸºäºç„¦ç‚¹çš„è¾…åŠ©çº¿
        [data-node-id] {

            &.li {

                // ä¸Šçº§èŠ‚ç‚¹
                &:has([data-plugin-focus=true]) {
                    transition: all 250ms;
                    outline-color: var(--custom-striking-color);
                }

                // ä¸‹çº§èŠ‚ç‚¹
                &:has(>[data-plugin-focus=true][data-node-id]) {

                    .list[data-node-id] {

                        .li[data-node-id] {
                            transition: all 250ms;
                            outline-color: var(--b3-theme-primary);
                        }
                    }
                }
            }
        }

        // åŸºäºé¼ æ ‡æ‚¬æµ®çš„è¾…åŠ©çº¿
        // [data-node-id].li:hover {
        //     /* é¼ æ ‡æ‚¬æµ®åˆ—è¡¨é¡¹ */
        //     background-color: var(--custom-list-table-hover-background-color);
        // }
    }
}

/* é¼ æ ‡æ‚¬æµ®ä¸Šçº§èŠ‚ç‚¹è½®å»“é«˜äº® */
/* .protyle-content *[custom-type~=table].list [data-node-id].li:hover,
.protyle-content *[custom-type~=è¡¨æ ¼].list [data-node-id].li:hover {
    outline-color: var(--custom-striking-color);
} */

/* é¼ æ ‡æ‚¬æµ®ä¸‹çº§èŠ‚ç‚¹è½®å»“é«˜äº® */
/* .protyle-content *[custom-type~=table].list [data-node-id].li:hover~[data-node-id].list [data-node-id].li,
.protyle-content *[custom-type~=è¡¨æ ¼].list [data-node-id].li:hover~[data-node-id].list [data-node-id].li {
    outline-color: var(--b3-theme-primary);
} */

/* ğŸ‘†ğŸ‘†ğŸ‘† è¡¨æ ¼åˆ—è¡¨è¾…åŠ©çº¿ ğŸ‘†ğŸ‘†ğŸ‘† */

/* ğŸ‘‡ğŸ‘‡ğŸ‘‡ å¯¼å›¾åˆ—è¡¨è¾…åŠ©çº¿ ğŸ‘‡ğŸ‘‡ğŸ‘‡ */

.protyle-content {

    [custom-type~="è„‘å›¾"],
    [custom-type~="å¯¼å›¾"],
    [custom-type~="æ€ç»´å¯¼å›¾"],
    [custom-type~=map],
    [custom-type~=mind-map] {

        // åŸºäºç„¦ç‚¹çš„è¾…åŠ©çº¿
        [data-node-id] {

            &.li {

                // ä¸Šçº§èŠ‚ç‚¹
                &:has([data-plugin-focus=true])>[data-node-id]:not(.li, .list),
                &:has([data-plugin-focus=true])>[data-node-id]:not(.li, .list):has(+.list[data-node-id]) {
                    transition: all 250ms;
                    outline-color: var(--custom-striking-color);
                }

                // ä¸‹çº§èŠ‚ç‚¹
                &:has(>[data-plugin-focus=true][data-node-id]) {

                    .list[data-node-id] {

                        [data-node-id]:not(.li, .list) {
                            transition: all 250ms;
                            outline-color: var(--b3-theme-primary);
                        }

                        &:after,
                        .li[data-node-id]::before,
                        .li[data-node-id]::after,
                        .list[data-node-id]::after {
                            transition: all 250ms;
                            /* ç»§æ‰¿çº¿é«˜äº® */
                            border-color: var(--b3-theme-primary) !important;
                        }
                    }
                }
            }
        }

        // åŸºäºé¼ æ ‡æ‚¬æµ®çš„è¾…åŠ©çº¿
        // [data-node-id] {
        //     &.li {
        //         &:hover {
        //             /* é¼ æ ‡æ‚¬æµ®åˆ—è¡¨é¡¹ */
        //             background-color: var(--custom-list-table-hover-background-color);
        //             transition: all 500ms;

        //             >[data-node-id]:not(.li, .list)>[contenteditable][spellcheck] {
        //                 /* é¼ æ ‡æ‚¬æµ®ä¸Šçº§èŠ‚ç‚¹è½®å»“é«˜äº® */
        //                 outline-color: var(--custom-striking-color);
        //             }
        //         }

        //         >[data-node-id]:not(.li, .list):hover>[contenteditable][spellcheck] {
        //             /* é¼ æ ‡æ‚¬æµ®å½“å‰èŠ‚ç‚¹é«˜äº® */
        //             background-color: var(--b3-theme-background);
        //             outline-color: var(--b3-theme-primary);
        //         }
        //     }

        //     &:hover+[data-node-id].list [data-node-id].li>[data-node-id]:not(.li, .list)>div[contenteditable][spellcheck] {
        //         /* é¼ æ ‡æ‚¬æµ®ä¸‹çº§èŠ‚ç‚¹è½®å»“é«˜äº® */
        //         outline-color: var(--b3-theme-primary);
        //     }

        //     &:hover~[data-node-id].list {

        //         &:after,
        //         [data-node-id].li::after,
        //         [data-node-id].li::before,
        //         [data-node-id].list::after {
        //             /* ç»§æ‰¿çº¿é«˜äº® */
        //             border-color: var(--b3-theme-primary);
        //         }
        //     }
        // }
    }
}

/* å¯¼èˆªçº¿é«˜äº® */
/* .protyle-content *[custom-type~="è„‘å›¾"] [data-node-id].li:hover::before,
.protyle-content *[custom-type~="è„‘å›¾"] [data-node-id].li:hover::after,
.protyle-content *[custom-type~="è„‘å›¾"] [data-node-id].list:hover::after,
.protyle-content *[custom-type~="è„‘å›¾"] [data-node-id].li:nth-last-child(2):hover::after,

.protyle-content *[custom-type~="å¯¼å›¾"] [data-node-id].li:hover::before,
.protyle-content *[custom-type~="å¯¼å›¾"] [data-node-id].li:hover::after,
.protyle-content *[custom-type~="å¯¼å›¾"] [data-node-id].list:hover::after,
.protyle-content *[custom-type~="å¯¼å›¾"] [data-node-id].li:nth-last-child(2):hover::after,

.protyle-content *[custom-type~="æ€ç»´å¯¼å›¾"] [data-node-id].li:hover::before,
.protyle-content *[custom-type~="æ€ç»´å¯¼å›¾"] [data-node-id].li:hover::after,
.protyle-content *[custom-type~="æ€ç»´å¯¼å›¾"] [data-node-id].list:hover::after,
.protyle-content *[custom-type~="æ€ç»´å¯¼å›¾"] [data-node-id].li:nth-last-child(2):hover::after,

.protyle-content *[custom-type~=map] [data-node-id].li:hover::before,
.protyle-content *[custom-type~=map] [data-node-id].li:hover::after,
.protyle-content *[custom-type~=map] [data-node-id].list:hover::after,
.protyle-content *[custom-type~=map] [data-node-id].li:nth-last-child(2):hover::after,

.protyle-content *[custom-type~=mind-map] [data-node-id].li:hover::before,
.protyle-content *[custom-type~=mind-map] [data-node-id].li:hover::after,
.protyle-content *[custom-type~=mind-map] [data-node-id].list:hover::after,
.protyle-content *[custom-type~=mind-map] [data-node-id].li:nth-last-child(2):hover::after {
    border-color: var(--custom-striking-color);
    transition: all 500ms;
}
*/

/* ğŸ‘†ğŸ‘†ğŸ‘† å¯¼å›¾åˆ—è¡¨è¾…åŠ©çº¿ ğŸ‘†ğŸ‘†ğŸ‘† */
