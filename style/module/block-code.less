/* ä»£ç å— */

.code-body-padding(@size: 24px) {
    margin-top: -24px;
    padding-top: 24px;
    padding-bottom: 24px;
}

/* ğŸ‘‡ç¼–è¾‘åŒºä¸å¯¼å‡ºé¢„è§ˆå…±ç”¨æ ·å¼ğŸ‘‡ */
.b3-typography,
.protyle-wysiwyg {

    pre,
    .code-block {
        /* å—èƒŒæ™¯é¢œè‰² */
        background-color: var(--custom-block-code-background-color);

        >.hljs {
            /* ç¼–è¾‘åŒº */
            background-color: transparent;
        }
    }
}

/* ğŸ‘†ç¼–è¾‘åŒºä¸å¯¼å‡ºé¢„è§ˆå…±ç”¨æ ·å¼ğŸ‘† */

/* ğŸ‘‡å¯¼å‡ºé¢„è§ˆæ ·å¼ğŸ‘‡ */
.b3-typography {

    .protyle-linenumber__rows,
    .hljs {
        padding: 0.5em;
    }
}

/* ğŸ‘†å¯¼å‡ºé¢„è§ˆæ ·å¼ğŸ‘† */

/* ğŸ‘‡ç¼–è¾‘åŒºæ ·å¼ğŸ‘‡ */
.protyle-wysiwyg {
    [data-node-id].code-block {
        margin: 0.5em 0;
        flex-wrap: wrap;

        >.protyle-action {
            /* åŠŸèƒ½æŒ‰é’®æ  */
            // float: right;
            // display: block;
            position: sticky;
            width: 100%;
            justify-content: end;

            right: 0;
            top: 0;

            >span {
                /* åŠŸèƒ½æŒ‰é’® */
                opacity: unset; // æŒ‰é’®å¸¸æ˜¾

                &.protyle-icon {
                    /* æŒ‰é’®å›¾æ ‡ */
                    // top: 0;
                    // right: 0;
                }

                &.protyle-action__language {
                    /* è¯­è¨€æ ‡ç­¾ */
                    margin: 3px 0.5em 0 !important;
                    font-size: 75%;
                    line-height: normal;
                }

                &.fn__flex-1 {
                    /* é—´éš” */
                    flex: 0;
                }
            }
        }

        >.hljs {
            /* ä»£ç å—ä¸»ä½“ */
            background-color: transparent;
            .code-body-padding();
        }

        >.protyle-linenumber__rows {
            /* è¡Œå· */
            .code-body-padding();
            border-right: var(--custom-block-code-linenumber-separator-width) solid var(--custom-block-code-linenumber-separator-color);
            background-color: var(--custom-block-code-linenumber-background-color);
        }

        >.protyle-attr {
            /* å—å±æ€§ */
            top: -16px;
        }

        // é«˜äº®çš„æ ·å¼
        &.protyle-wysiwyg--hl,
        // è¢«é€‰ä¸­çš„æ ·å¼
        &.protyle-wysiwyg--select {

            >.hljs,
            >.protyle-linenumber__rows {
                /* è¢«é€‰ä¸­ä»£ç å—çš„æ ·å¼ */
                background-color: transparent !important;
            }
        }
    }
}

.protyle-wysiwyg--hl .code-block .hljs {
    /* ä¸Šçº§å—è¢«é€‰ä¸­çš„ä»£ç å—æ ·å¼ */
    background-color: transparent !important;
}

/* ğŸ‘†ç¼–è¾‘åŒºæ ·å¼ğŸ‘† */

/* ä»£ç å—ç¼–è¾‘æ—¶ä¸é—ª(v1.8.9 å·²ä¿®å¤)
 * REF https: //github.com/Achuan-2/siyuan-themes-tsundoku-light/blob/1aaa19fa3e6eebca4cb59606317d4bf1a23b0109/theme.css#L982
 */
/* .code-block .protyle-icons,
.code-block .protyle-icons .protyle-action__copy,
.code-block:hover .protyle-icons,
.code-block:hover .protyle-icons .protyle-action__copy {
    opacity: 1 !important;
} */
