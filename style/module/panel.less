/* 面板全局设置 */

// 添加 1 级辅助线
.guides(@base, @interval, @depth) {
    &::before {
        content: "";
        position: absolute;
        top: 0;
        left: @base + @interval * @depth;
        width: var(--custom-list-guides-line-width);
        height: 100%;
        // background-color: white;
        background-color: var(--custom-list-guides-line-color);
        z-index: 1;
    }
}

// 添加 10 级辅助线
.tree(@base-root, @base-default, @interval) {

    // absolute 定位需要上级元素使用 absolute 或 relative 定位方法
    ul {
        position: relative;
        top: 0;
        left: 0;
    }

    ul.b3-list {
        >ul {
            .guides(@base-root, @interval, 0);

            >ul {
                .guides(@base-default, @interval, 1);

                >ul {
                    .guides(@base-default, @interval, 2);

                    >ul {
                        .guides(@base-default, @interval, 3);

                        >ul {
                            .guides(@base-default, @interval, 4);

                            >ul {
                                .guides(@base-default, @interval, 5);

                                >ul {
                                    .guides(@base-default, @interval, 6);

                                    >ul {
                                        .guides(@base-default, @interval, 7);

                                        >ul {
                                            .guides(@base-default, @interval, 8);

                                            >ul {
                                                .guides(@base-default, @interval, 9);
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        // 鼠标悬浮更改辅助线颜色
        ul:hover::before {
            background-color: var(--b3-theme-primary-lighter);
        }
    }
}

// 移动端侧边分栏
#sidebar {
    .b3-list--mobile {
        >[data-type ^="sidebar"] {
            &:not([data-type="sidebar-file"]) {
                .tree(12px, 12px, 18px);
            }
        }
    }
}

// 桌面端侧边分栏
[data-type='wnd'][data-id] {
    min-height: 0%;
    margin: var(--custom-panel-distance);
    border-radius: var(--custom-border-radius);

    /* 侧边分栏面板 */
    .file-tree {

        &:not(.sy__file, .sy__tag, .sy__outline) {
            .tree(12px, 12px, 16px);
        }

        &.sy__tag,
        &.sy__outline {
            &:hover {
                .tree(12px, 12px, 18px);
            }
        }
    }

    /* 文档树面板(影响定位当前文档) */
    // .file-tree.sy__file {
    //     .block__icons+div:hover {
    //         .tree(15px, 12px);
    //     }
    // }

}

/* 悬浮面板与面板标题栏 */
.block__popover,
.layout-tab-container {
    .block__icons {
        height: var(--custom-panel-title-height);

        .counter {
            /* 计数器 */
            margin: 0;
            color: var(--b3-theme-on-background);
            background-color: transparent;
            outline: 1px solid;
        }

        .b3-text-field {
            /* 关键字过滤 */
            background-color: transparent;
            line-height: 22px;
        }
    }
}
