/* çª—å£æ§ä»¶ */
.window-tools() {
    .toolbar__item {
        margin: 0;
        // padding: calc(var(--custom-dock-item-margin-width) + var(--custom-dock-item-padding-width)) !important;
        padding: var(--custom-window-tool-padding-height) var(--custom-window-tool-padding-width);
        border-radius: 0;

        >svg {
            /* æŒ‰é’®å›¾æ ‡ */
            width: var(--custom-window-tool-icon-width) !important;
            height: var(--custom-window-tool-icon-height) !important;
        }
    }
}

/* æœªæ¿€æ´»çš„çª—å£æ ‡é¢˜æ  */
.inactive-window-title-bar {
    /* æœªæ¿€æ´»çš„çª—å£æ ‡é¢˜æ  */
    background-color: var(--custom-window-inactive-title-bar-background-color);

    .toolbar__item,
    .protyle-toolbar__divider {
        color: var(--custom-window-inactive-title-bar-color);
    }
}

/* é¡µç­¾æ–°çª—å£ */
body.body--window {
    #layouts {
        // padding-top: var(--custom-bar-height);

        .layout-tab-bar--readonly {
            /* é¡µç­¾æ  */
            padding-right: 0 !important;

            .item--readonly {
                >.fn__flex-1 {
                    /* é¡µç­¾æ æŒ‰é’®å¡«å……é—´éš” */
                    height: unset !important;
                }
            }
        }
    }

    // å¤±ç„¦çš„çª—å£
    &.body--blur {
        .layout-tab-bar {
            opacity: unset;
        }

        .toolbar__window {
            .inactive-window-title-bar();
        }
    }

    .toolbar__window {
        /* æ–°çª—å£æ ‡é¢˜æ  */
        width: 100%;
        position: initial;
        z-index: initial;

        // æŒ‰é’®é å³
        justify-content: flex-end;

        border-bottom: 1px solid var(--b3-border-color);

        app-region: drag;

        >* {
            app-region: no-drag;
        }

        // çª—å£æ§ä»¶
        >.toolbar__item {
            // é¿å…åœ¨é¡µå†…å…¨å±æ—¶è¢«é®æŒ¡
            position: relative;
            z-index: 502;
        }

        >.toolbar__item--active {
            /* è¢«æ¿€æ´»çš„çª—å£æ§ä»¶ */
            box-shadow: unset;
        }

        .window-tools();
    }
}

/* â†‘ğŸ‘†ğŸ‘ˆğŸ‘‰ğŸ‘‡â†“ */
.toolbar__window,
#toolbar,
#dockTop,
#dockLeft,
#dockRight,
#dockBottom,
#status {
    padding: 0;
    box-sizing: content-box;

    .protyle-toolbar__divider {
        // åˆ†å‰²çº¿
        color: var(--b3-toolbar-color);
        border-color: currentColor;
    }

    .toolbar__item {
        height: auto;
    }

    .b3-tooltips {
        /* è¾¹æ æŒ‰é’® */
        margin: var(--custom-dock-item-margin-width);
        padding: var(--custom-dock-item-padding-width);
        border-radius: var(--custom-border-radius);
    }

    .toolbar__item:not(#barWorkspace),
    .b3-tooltips {
        >svg {
            /* æŒ‰é’®å›¾æ ‡ */
            width: var(--custom-dock-item-icon-size);
            height: var(--custom-dock-item-icon-size);
        }
    }
}

/* ğŸ‘†ğŸ‘ˆğŸ‘‰ğŸ‘‡ */
#dockTop,
#dockLeft,
#dockRight,
#dockBottom {
    background-color: var(--custom-dock-background-color);
}

/* â†‘ğŸ‘†ğŸ‘‡â†“ */
.toolbar__window,
#toolbar,
#dockTop,
#dockBottom,
#status {}

/* â†‘â†“ */
.toolbar__window,
#toolbar,
#status {
    height: var(--custom-bar-height);

    .toolbar__item {
        /* å·¥å…·æ  & çŠ¶æ€æ æŒ‰é’® */
        margin: 0 var(--custom-dock-item-margin-width);
    }
}

/* ğŸ‘†ğŸ‘‡ */
#dockTop,
#dockBottom {
    height: var(--custom-dock-width);
    padding: 0;
}

/* ğŸ‘ˆğŸ‘‰ */
#dockLeft,
#dockRight {
    width: var(--custom-dock-width);
}

.toolbar__window,
#toolbar {
    /* â†‘é¡¶éƒ¨å·¥å…·æ â†‘ */
    background-color: var(--custom-tool-bar-background-color);

    .body--blur & {
        .inactive-window-title-bar();
    }

    // macOS ç³»ç»Ÿæ¡Œé¢ç«¯çª—å£æ§ä»¶ä½ç½®
    body:not(.body--win32) &:not(.toolbar--browser) {
        padding-left: 69px;
    }

    .toolbar__text {
        color: var(--b3-theme-on-background);
    }

    .toolbar__item {
        /* é¡¶éƒ¨å·¥å…·æ æŒ‰é’® */
        margin: 0 var(--custom-dock-item-margin-width);


        &:not(.toolbar__item--disabled):not(.toolbar__item--close):hover {
            background-color: var(--b3-theme-background-light);
        }

        &.toolbar__item--active {
            /* é¡¶éƒ¨å·¥å…·æ æ¿€æ´»çš„æŒ‰é’® */
            @offset: 2px; // è°ƒæ•´é‡

            margin: (calc(0px + @offset)) calc(var(--custom-dock-item-margin-width) + @offset);
            padding: calc(var(--custom-dock-item-padding-width) - @offset);
        }
    }

    #barWorkspace {
        /* å·¥ä½œç©ºé—´ä¸‹æ‹‰èœå• */
        // margin: 0;
    }

    #drag {
        /* é¡¶éƒ¨å·¥å…·æ æ ‡é¢˜ */
        padding: 0;
        line-height: normal;
    }

    // çª—å£æ§ä»¶
    #windowControls {
        .window-tools();
    }
}

/* è¢«æ¿€æ´»çš„æ§ä»¶ */
.block__icon--active,
.toolbar__item--active {
    color: var(--custom-toolbar-tiem-active-color);
    background-color: var(--custom-toolbar-tiem-active-background-color);
    /* outline: 1px solid var(--custom-toolbar-tiem-active-color); */
    box-shadow: 0 0 var(--custom-toolbar-tiem-active-box-shadow-spread) var(--custom-box-shadow-color);
}

/* â†‘é¡¶éƒ¨å·¥å…·æ â†‘ */

/* â†“åº•éƒ¨çŠ¶æ€æ â†“ */

#status {
    background-color: var(--custom-status-bar-background-color);

    #barDock,
    #barHelp {
        .b3-menu {
            /* å·¦ä¸‹å³ä¸‹èœå• */
            bottom: var(--custom-bar-height) !important;
        }
    }

    .status__msg,
    .status__counter,
    .status__backgroundtask {
        line-height: var(--custom-bar-height);
    }
}
